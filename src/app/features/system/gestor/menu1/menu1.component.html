<div class="container_principal">
    <div class="container_content_geral">
        <!-- Visão Geral -->
        <div class="container_visao_geral">
            <div class="indicadores">
                <div class="container_texto">
                    <h5>Total de Pacientes</h5>
                    <p>{{ quantidadePacientes }}</p>
                </div>
                <div class="container_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                </div>
            </div>

            <div class="indicadores">
                <div class="container_texto">
                    <h5>Total de Usuários</h5>
                    <p>{{ quantidadeUsuarios }}</p>
                </div>
                <div class="container_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </div>
            </div>

            <div class="indicadores">
                <div class="container_texto">
                    <h5>Programação do dia</h5>
                    <p>1</p>
                </div>
                <div class="container_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M9 1V3H15V1H17V3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9ZM20 11H4V19H20V11ZM7 5H4V9H20V5H17V7H15V5H9V7H7V5Z">
                        </path>
                    </svg>
                </div>
            </div>

            <div class="indicadores">
                <div class="container_texto">
                    <h5>Mensagens</h5>
                    <p>1</p>
                </div>
                <div class="container_icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M2 8.99374C2 5.68349 4.67654 3 8.00066 3H15.9993C19.3134 3 22 5.69478 22 8.99374V21H8.00066C4.68659 21 2 18.3052 2 15.0063V8.99374ZM20 19V8.99374C20 6.79539 18.2049 5 15.9993 5H8.00066C5.78458 5 4 6.78458 4 8.99374V15.0063C4 17.2046 5.79512 19 8.00066 19H20ZM14 11H16V13H14V11ZM8 11H10V13H8V11Z">
                        </path>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Ações Rápidas e Atividades -->
        <div class="container_atividades">
            <div class="section_card">
                <h3>Mensagens Recentes</h3>

                <div class="mensagem-vazia" *ngIf="mensagensRecentes.length === 0">
                    <p>Nenhuma mensagem ainda</p>
                </div>

                <div class="ativar_item" *ngFor="let mensagem of mensagensRecentes">
                    <div class="icon"></div>
                    <div class="details">
                        <div class="container_txt_msg">
                            <strong>{{mensagem.autor}}</strong> - {{mensagem.hora}}<br>
                            {{mensagem.texto}}
                        </div>
                    </div>
                </div>
            </div>

            <div class="section_card card_acoes_rapidas">
                <h3>Ações Rápidas</h3>
                <button class="botao" (click)="abrirModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path
                            d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                    </svg>
                    Adicionar Novo Paciente
                </button>
                <button class="botao" (click)="abrirModalUsuario()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path
                            d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                    </svg>
                    Cadastrar Novo Usuário
                </button>

            </div>
        </div>
    </div>
</div>

<!-- Modal de Cadastro de Paciente -->
@if (modalAberto) {
<div class="modal-overlay" (click)="handleOverlayClick()">
    <div class="modal-container" (click)="$event.stopPropagation()">
        <div class="modal-header">
            <h2>Adicionar Novo Paciente</h2>
            <button class="close-btn" (click)="fecharModal()">×</button>
        </div>

        <div class="modal-body">
            <div class="form-group">
                <label>Nome do Paciente</label>
                <input type="text" class="form-input" [class.input-error]="errosPaciente.nomePaciente"
                    placeholder="Digite o nome completo" [(ngModel)]="novoPaciente.nomePaciente"
                    (input)="validarNome($event, 'nomePaciente', novoPaciente)">
                @if (errosPaciente.nomePaciente) { <span class="error-msg">Este campo é obrigatório</span> }
            </div>

            <div class="form-row">
                <div class="form-group form-group-large">
                    <label>Data de Nascimento</label>
                    <input type="date" class="form-input" [class.input-error]="errosPaciente.dataNascimento"
                        [(ngModel)]="novoPaciente.dataNascimento" min="01-01-1900" max="31-12-2030"
                        (change)="atualizarIdadePaciente()">
                    @if (errosPaciente.dataNascimento) { <span class="error-msg">Este campo é obrigatório</span> }
                </div>
                <div class="form-group form-group-small">
                    <label>Idade</label>
                    <input type="number" class="form-input" [class.input-error]="errosPaciente.idade"
                        placeholder="Idade" [(ngModel)]="novoPaciente.idade" readonly>
                    @if (errosPaciente.idade) { <span class="error-msg">Este campo é obrigatório</span> }
                </div>
            </div>

            <div class="form-group">
                <label>Rua</label>
                <input type="text" class="form-input" [class.input-error]="errosPaciente.rua"
                    placeholder="Digite o nome da rua" [(ngModel)]="novoPaciente.rua">
                @if (errosPaciente.rua) { <span class="error-msg">Este campo é obrigatório</span> }
            </div>

            <div class="form-row">
                <div class="form-group form-group-small">
                    <label>Número</label>
                    <input type="text" class="form-input" [class.input-error]="errosPaciente.numero" placeholder="Nº"
                        [(ngModel)]="novoPaciente.numero">
                    @if (errosPaciente.numero) { <span class="error-msg">Este campo é obrigatório</span> }
                </div>
                <div class="form-group form-group-large">
                    <label>Bairro</label>
                    <input type="text" class="form-input" [class.input-error]="errosPaciente.bairro"
                        placeholder="Digite o bairro" [(ngModel)]="novoPaciente.bairro">
                    @if (errosPaciente.bairro) { <span class="error-msg">Este campo é obrigatório</span> }
                </div>
            </div>

            <div class="form-row">
                <div class="form-group form-group-large">
                    <label>Cidade</label>
                    <input type="text" class="form-input" [class.input-error]="errosPaciente.cidade"
                        placeholder="Digite a cidade" [(ngModel)]="novoPaciente.cidade">
                    @if (errosPaciente.cidade) { <span class="error-msg">Este campo é obrigatório</span> }
                </div>
                <div class="form-group form-group-small">
                    <label>Estado</label>
                    <input type="text" class="form-input" [class.input-error]="errosPaciente.estado" placeholder="UF"
                        [(ngModel)]="novoPaciente.estado">
                    @if (errosPaciente.estado) { <span class="error-msg">Este campo é obrigatório</span> }
                </div>
            </div>

            <div class="form-group">
                <label>Comorbidades</label>
                @for (comorbidade of comorbidadesList; track $index; let i = $index) {
                <div class="comorbidade-row">
                    <input type="text" class="form-input" placeholder="Descreva a comorbidade"
                        [(ngModel)]="comorbidadesList[i]">
                    @if (comorbidadesList.length > 1) {
                    <button type="button" class="btn-remove-comorbidade" (click)="removerComorbidade(i)">×</button>
                    }
                </div>
                }
                <button type="button" class="btn-add-comorbidade" (click)="adicionarComorbidade()">
                    <span class="plus-icon">+</span>
                    Adicionar Comorbidade
                </button>
            </div>

            <div class="form-group">
                <label>Cuidador Atribuído</label>
                <select class="form-select" (change)="selecionarOpcaoCuidador($event)"
                    [value]="novoPaciente.cuidadorAtribuido">
                    <option value="" disabled selected>Selecione um cuidador</option>
                    @for (cuidador of cuidadores; track cuidador) {
                    <option [value]="cuidador">{{ cuidador }}</option>
                    }
                    <option value="CADASTRAR_NOVO">+ Cadastrar Novo Cuidador</option>
                </select>
            </div>

            <!-- Cadastro Rápido de Cuidador -->
            @if (mostrarCadastroCuidador) {
            <div class="cadastro-rapido cadastro-cuidador">
                <h3>Cadastrar Novo Cuidador</h3>

                <div class="form-row">
                    <div class="form-group form-group-large">
                        <label>Nome</label>
                        <input type="text" class="form-input" [class.input-error]="errosUsuario.userName"
                            placeholder="Nome" [(ngModel)]="novoCuidador.userName"
                            (input)="validarNome($event, 'userName', novoCuidador)">
                        @if (errosUsuario.userName) { <span class="error-msg">Este campo é obrigatório</span> }
                    </div>
                    <div class="form-group form-group-large">
                        <label>Sobrenome</label>
                        <input type="text" class="form-input" [class.input-error]="errosUsuario.sobrenome"
                            placeholder="Sobrenome" [(ngModel)]="novoCuidador.sobrenome">
                        @if (errosUsuario.sobrenome) { <span class="error-msg">Este campo é obrigatório</span> }
                    </div>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-input" [class.input-error]="errosUsuario.email"
                        placeholder="email@exemplo.com" [(ngModel)]="novoCuidador.email">
                    @if (errosUsuario.email) { <span class="error-msg">Este campo é obrigatório</span> }
                </div>

                <div class="form-row">
                    <div class="form-group form-group-large">
                        <label>Telefone</label>
                        <input type="tel" class="form-input" [class.input-error]="errosUsuario.telefone"
                            placeholder="(00) 00000-0000" [(ngModel)]="novoCuidador.telefone">
                        @if (errosUsuario.telefone) { <span class="error-msg">Este campo é obrigatório</span> }
                    </div>
                    <div class="form-group form-group-large">
                        <label>Whatsapp</label>
                        <input type="tel" class="form-input" placeholder="(00) 00000-0000"
                            [(ngModel)]="novoCuidador.whatsapp">
                    </div>
                </div>

                <div class="form-group">
                    <label>Tempo de Experiência</label>
                    <input type="text" class="form-input" placeholder="Ex: 5 anos"
                        [(ngModel)]="novoCuidador.tempoExperiencia">
                </div>

                <div class="form-group">
                    <label>Experiência com quais comorbidades?</label>
                    @for (comorbidade of experienciaComorbidadesList; track $index; let i = $index) {
                    <div class="comorbidade-row">
                        <input type="text" class="form-input" placeholder="Descreva a comorbidade"
                            [(ngModel)]="experienciaComorbidadesList[i]">
                        @if (experienciaComorbidadesList.length > 1) {
                        <button type="button" class="btn-remove-comorbidade"
                            (click)="removerExperienciaComorbidade(i)">×</button>
                        }
                    </div>
                    }
                    <button type="button" class="btn-add-comorbidade" (click)="adicionarExperienciaComorbidade()">
                        <span class="plus-icon">+</span>
                        Adicionar Comorbidade
                    </button>
                </div>

                <div class="cadastro-rapido-actions">
                    <button class="btn-cancel-quick" (click)="cancelarCadastroCuidador()">Cancelar</button>
                    <button class="btn-save-quick" (click)="salvarNovoCuidador()">Salvar Cuidador</button>
                </div>
            </div>
            }

            <div class="form-group">
                <label>Médico Atribuído</label>
                <select class="form-select" (change)="selecionarOpcaoMedico($event)"
                    [value]="novoPaciente.medicoAtribuido">
                    <option value="" disabled selected>Selecione um médico</option>
                    @for (medico of medicos; track medico) {
                    <option [value]="medico">{{ medico }}</option>
                    }
                    <option value="CADASTRAR_NOVO">+ Cadastrar Novo Médico</option>
                </select>
            </div>

            <!-- Cadastro Rápido de Médico -->
            @if (mostrarCadastroMedico) {
            <div class="cadastro-rapido cadastro-medico">
                <h3>Cadastrar Novo Médico</h3>

                <div class="form-row">
                    <div class="form-group form-group-large">
                        <label>Nome</label>
                        <input type="text" class="form-input" [class.input-error]="errosUsuario.userName"
                            placeholder="Nome" [(ngModel)]="novoMedico.userName"
                            (input)="validarNome($event, 'userName', novoMedico)">
                        @if (errosUsuario.userName) { <span class="error-msg">Este campo é obrigatório</span> }
                    </div>
                    <div class="form-group form-group-large">
                        <label>Sobrenome</label>
                        <input type="text" class="form-input" [class.input-error]="errosUsuario.sobrenome"
                            placeholder="Sobrenome" [(ngModel)]="novoMedico.sobrenome">
                        @if (errosUsuario.sobrenome) { <span class="error-msg">Este campo é obrigatório</span> }
                    </div>
                </div>



                <div class="form-row">
                    <div class="form-group form-group-large">
                        <label>Telefone</label>
                        <input type="tel" class="form-input" [class.input-error]="errosUsuario.telefone"
                            placeholder="(00) 00000-0000" [(ngModel)]="novoMedico.telefone">
                        @if (errosUsuario.telefone) { <span class="error-msg">Este campo é obrigatório</span> }
                    </div>
                    <div class="form-group form-group-large">
                        <label>Whatsapp</label>
                        <input type="tel" class="form-input" placeholder="(00) 00000-0000"
                            [(ngModel)]="novoMedico.whatsapp">
                    </div>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-input" [class.input-error]="errosUsuario.email"
                        placeholder="email@exemplo.com" [(ngModel)]="novoMedico.email">
                    @if (errosUsuario.email) { <span class="error-msg">Este campo é obrigatório</span> }
                </div>

                <div class="cadastro-rapido-actions">
                    <button class="btn-cancel-quick" (click)="cancelarCadastroMedico()">Cancelar</button>
                    <button class="btn-save-quick" (click)="salvarNovoMedico()">Salvar Médico</button>
                </div>
            </div>
            }

            <div class="form-group">
                <label>Contato Familiar</label>
                <select class="form-select" [class.input-error]="errosPaciente.contatoFamiliar"
                    (change)="selecionarOpcaoFamiliar($event)" [value]="novoPaciente.contatoFamiliar">
                    <option value="" disabled selected>Selecione um familiar</option>
                    @for (familiar of familiares; track familiar) {
                    <option [value]="familiar">{{ familiar }}</option>
                    }
                    <option value="CADASTRAR_NOVO">+ Cadastrar Novo Familiar</option>
                </select>
                @if (errosPaciente.contatoFamiliar) { <span class="error-msg">Este campo é obrigatório</span> }
            </div>

            <!-- Cadastro Rápido de Familiar -->
            @if (mostrarCadastroFamiliar) {
            <div class="cadastro-rapido cadastro-familiar">
                <h3>Cadastrar Novo Familiar</h3>

                <div class="form-row">
                    <div class="form-group form-group-large">
                        <label>Nome</label>
                        <input type="text" class="form-input" [class.input-error]="errosUsuario.userName"
                            placeholder="Nome" [(ngModel)]="novoFamiliar.userName"
                            (input)="validarNome($event, 'userName', novoFamiliar)">
                        @if (errosUsuario.userName) { <span class="error-msg">Este campo é obrigatório</span> }
                    </div>
                    <div class="form-group form-group-large">
                        <label>Sobrenome</label>
                        <input type="text" class="form-input" [class.input-error]="errosUsuario.sobrenome"
                            placeholder="Sobrenome" [(ngModel)]="novoFamiliar.sobrenome">
                        @if (errosUsuario.sobrenome) { <span class="error-msg">Este campo é obrigatório</span> }
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group form-group-large">
                        <label>Data de Nascimento</label>
                        <input type="date" class="form-input" [(ngModel)]="novoFamiliar.dataNascimento" min="1900-01-01"
                            max="9999-12-31" (change)="atualizarIdadeFamiliar()">
                    </div>
                    <div class="form-group form-group-small">
                        <label>Idade</label>
                        <input type="number" class="form-input" placeholder="Idade" [(ngModel)]="novoFamiliar.idade"
                            readonly>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group form-group-large">
                        <label>Telefone</label>
                        <input type="tel" class="form-input" [class.input-error]="errosUsuario.telefone"
                            placeholder="(00) 00000-0000" [(ngModel)]="novoFamiliar.telefone">
                        @if (errosUsuario.telefone) { <span class="error-msg">Este campo é obrigatório</span> }
                    </div>
                    <div class="form-group form-group-large">
                        <label>Whatsapp</label>
                        <input type="tel" class="form-input" placeholder="(00) 00000-0000"
                            [(ngModel)]="novoFamiliar.whatsapp">
                    </div>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-input" [class.input-error]="errosUsuario.email"
                        placeholder="email@exemplo.com" [(ngModel)]="novoFamiliar.email">
                    @if (errosUsuario.email) { <span class="error-msg">Este campo é obrigatório</span> }
                </div>

                <div class="form-group">
                    <label>Rua</label>
                    <input type="text" class="form-input" placeholder="Digite o nome da rua"
                        [(ngModel)]="novoFamiliar.rua">
                </div>

                <div class="form-row">
                    <div class="form-group form-group-small">
                        <label>Número</label>
                        <input type="text" class="form-input" placeholder="Nº" [(ngModel)]="novoFamiliar.numero">
                    </div>
                    <div class="form-group form-group-large">
                        <label>Bairro</label>
                        <input type="text" class="form-input" placeholder="Digite o bairro"
                            [(ngModel)]="novoFamiliar.bairro">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group form-group-large">
                        <label>Cidade</label>
                        <input type="text" class="form-input" placeholder="Digite a cidade"
                            [(ngModel)]="novoFamiliar.cidade">
                    </div>
                    <div class="form-group form-group-small">
                        <label>Estado</label>
                        <input type="text" class="form-input" placeholder="UF" [(ngModel)]="novoFamiliar.estado">
                    </div>
                </div>

                <div class="cadastro-rapido-actions">
                    <button class="btn-cancel-quick" (click)="cancelarCadastroFamiliar()">Cancelar</button>
                    <button class="btn-save-quick" (click)="salvarNovoFamiliar()">Salvar Familiar</button>
                </div>
            </div>
            }
        </div>

        <div class="modal-footer">
            <button class="btn-cancel" (click)="fecharModal()">Cancelar</button>
            <button class="btn-add" (click)="adicionarPaciente()">Adicionar Paciente</button>
        </div>
    </div>
</div>
}

<!-- Modal de Sucesso - Paciente -->
@if (modalSucessoAberto) {
<div class="modal-overlay" (click)="handleOverlayClick()">
    <div class="modal-container modal-sucesso" (click)="$event.stopPropagation()">
        <div class="modal-body">
            <div class="sucesso-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" viewBox="0 0 16 16">
                    <path
                        d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
                </svg>
            </div>
            <p class="sucesso-mensagem">Paciente adicionado com sucesso!</p>
        </div>
        <div class="modal-footer">
            <button class="btn-ok" (click)="fecharModalSucesso()">OK</button>
        </div>
    </div>
</div>
}

<!-- Modal de Cadastro de Usuário -->
@if (modalUsuarioAberto) {
<div class="modal-overlay" (click)="handleOverlayClick()">
    <div class="modal-container" (click)="$event.stopPropagation()">
        <div class="modal-header">
            <h2>Cadastrar Novo Usuário</h2>
            <button class="close-btn" (click)="fecharModalUsuario()">×</button>
        </div>

        <div class="modal-body">
            <div class="form-group">
                <label>Tipo de Usuário</label>
                <select class="form-select" [(ngModel)]="novoUsuario.tipoUsuario">
                    <option value="" disabled selected>Selecione o Tipo de Usuário</option>
                    <option value="cuidador">Cuidador</option>
                    <option value="medico">Médico</option>
                    <option value="familiar">Familiar</option>
                </select>
            </div>

            <!-- Só mostra o resto do formulário se um tipo de usuário foi selecionado -->
            @if (novoUsuario.tipoUsuario) {
            <div class="form-row">
                <div class="form-group form-group-large">
                    <label>Nome</label>
                    <input type="text" class="form-input" placeholder="Nome" [(ngModel)]="novoUsuario.userName"
                        (input)="validarNome($event, 'userName', novoUsuario)">
                </div>
                <div class="form-group form-group-large">
                    <label>Sobrenome</label>
                    <input type="text" class="form-input" placeholder="Sobrenome" [(ngModel)]="novoUsuario.sobrenome"
                        (input)="validarNome($event, 'sobrenome', novoUsuario)">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group form-group-large">
                    <label>Data de Nascimento</label>
                    <input type="date" class="form-input" [(ngModel)]="novoUsuario.dataNascimento" min="1900-01-01"
                        max="9999-12-31" (change)="atualizarIdadeUsuario()">
                </div>
                <div class="form-group form-group-small">
                    <label>Idade</label>
                    <input type="number" class="form-input" placeholder="Idade" [(ngModel)]="novoUsuario.idade"
                        readonly>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group form-group-large">
                    <label>Telefone</label>
                    <input type="tel" class="form-input" placeholder="(00) 00000-0000"
                        [(ngModel)]="novoUsuario.telefone">
                </div>
                <div class="form-group form-group-large">
                    <label>Whatsapp</label>
                    <input type="tel" class="form-input" placeholder="(00) 00000-0000"
                        [(ngModel)]="novoUsuario.whatsapp">
                </div>
            </div>

            <div class="form-group">
                <label>Email</label>
                <input type="email" class="form-input" placeholder="email@exemplo.com" [(ngModel)]="novoUsuario.email">
            </div>

            @if (novoUsuario.tipoUsuario !== 'medico') {
            <div class="form-group">
                <label>Rua</label>
                <input type="text" class="form-input" placeholder="Digite o nome da rua" [(ngModel)]="novoUsuario.rua">
            </div>

            <div class="form-row">
                <div class="form-group form-group-small">
                    <label>Número</label>
                    <input type="text" class="form-input" placeholder="Nº" [(ngModel)]="novoUsuario.numero">
                </div>
                <div class="form-group form-group-large">
                    <label>Bairro</label>
                    <input type="text" class="form-input" placeholder="Digite o bairro"
                        [(ngModel)]="novoUsuario.bairro">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group form-group-large">
                    <label>Cidade</label>
                    <input type="text" class="form-input" placeholder="Digite a cidade"
                        [(ngModel)]="novoUsuario.cidade">
                </div>
                <div class="form-group form-group-small">
                    <label>Estado</label>
                    <input type="text" class="form-input" placeholder="UF" [(ngModel)]="novoUsuario.estado">
                </div>
            </div>
            }

            @if (novoUsuario.tipoUsuario === 'cuidador') {
            <div class="form-group">
                <label>Tempo de Experiência</label>
                <input type="text" class="form-input" placeholder="Ex: 5 anos"
                    [(ngModel)]="novoUsuario.tempoExperiencia">
            </div>
            }

            @if (novoUsuario.tipoUsuario !== 'familiar' && novoUsuario.tipoUsuario !== 'medico') {
            <div class="form-group">
                <label>Chave Pix</label>
                <input type="text" class="form-input" placeholder="CPF, Email, Telefone ou Chave Aleatória"
                    [(ngModel)]="novoUsuario.chavePix">
            </div>
            }

            @if (novoUsuario.tipoUsuario !== 'familiar' && novoUsuario.tipoUsuario !== 'medico') {
            <div class="form-group">
                <label>Experiência com quais comorbidades?</label>
                @for (comorbidade of novoUsuario.experienciaComorbidadesList; track $index; let i = $index) {
                <div class="comorbidade-row">
                    <input type="text" class="form-input" placeholder="Descreva a comorbidade"
                        [(ngModel)]="novoUsuario.experienciaComorbidadesList![i]">
                    @if (novoUsuario.experienciaComorbidadesList!.length > 1) {
                    <button type="button" class="btn-remove-comorbidade"
                        (click)="removerExperienciaComorbidadeUsuario(i)">×</button>
                    }
                </div>
                }
                <button type="button" class="btn-add-comorbidade" (click)="adicionarExperienciaComorbidadeUsuario()">
                    <span class="plus-icon">+</span>
                    Adicionar Comorbidade
                </button>
            </div>
            }
            }
        </div>

        <div class="modal-footer">
            <button class="btn-cancel" (click)="fecharModalUsuario()">Cancelar</button>
            <button class="btn-add" (click)="adicionarUsuario()">Cadastrar Usuário</button>
        </div>
    </div>
</div>
}

<!-- Modal de Sucesso - Usuário -->
@if (modalSucessoUsuarioAberto) {
<div class="modal-overlay" (click)="handleOverlayClick()">
    <div class="modal-container modal-sucesso" (click)="$event.stopPropagation()">
        <div class="modal-body">
            <div class="sucesso-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" viewBox="0 0 16 16">
                    <path
                        d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
                </svg>
            </div>
            <p class="sucesso-mensagem">Usuário cadastrado com sucesso!</p>
        </div>
        <div class="modal-footer">
            <button class="btn-ok" (click)="fecharModalSucessoUsuario()">OK</button>
        </div>
    </div>
</div>
}